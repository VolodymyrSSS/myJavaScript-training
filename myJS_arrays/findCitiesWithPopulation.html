<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Find cities with population</title>
    <style>
      body {
        background-color: tan;
        margin: 0;
        font-family: Verdana, sans-serif;
      }

      .emph {
        color: red;
      }

      .title {
        color: navy;
        text-align: center;
        font-weight: 700;
      }

      .task {
        width: 50%;
        padding: 15px 25px;
        color: navy;
        background-color: #e2e2e2;
        margin: 35px auto;
      }

      p {
        width: 80%;
        margin: 0 auto;
      }

      pre {
        width: 50%;
        background-color: #bebebe;
        padding-top: 20px;
        margin: 0 auto;
      }

      code {
        font-family: Arial, Helvetica, sans-serif;
        font-size: large;
      }

      .code-ex {
        width: 50%;
        font-family: sans-serif;
        font-style: italic;
        background-color: #bebebe;
        font-size: large;
        padding-left: 15px;
        margin: 0 auto;
      }
    </style>
  </head>

  <body>
    <h2 class="title">Find cities with population</h2>
    <h4 class="title">
      Working with arrays: arrays methods:
      <span class="emph">map(), filter()</span> and operators
      <span class="emph"><, &&</span>
    </h4>

    <h4 class="task">
      В нас заданий масив об'єктів. В кожному об'єкті як ключ, задано назву
      міста, а значенням до нього - кількість населення, що проживає в цьому
      місті та його пригородах.<br />
      Напишіть функцію, яка буде шукати та виводити ті міста, у яких населення
      складає, наприклад, менше ніж 15 млн.<br />
      Покажіть, що у функції потрібно змінити, щоб задаовольнялась умова з
      пошуку тільки тих міст, кількість населення яких складає від заданого
      мінімума до максимума?
    </h4>

    <p>
      <code>
        <pre>
          const cities = [
          &nbsp;&nbsp;{city: 'Kyiv', population: 5 000 000},
          &nbsp;&nbsp;{city: 'Tokyo', population: 13 000 000},
          &nbsp;&nbsp;{city: 'New York', population: 22 000 000},
          &nbsp;&nbsp;{city: 'London', population: 17 000 000},
          ]<br/>

          const findCities = (population) => {
            &nbsp;// ..ваш код..
          };         
          // отримати міста, населення яких менше ніж 15 млн
          findCities(15 000 000); // ['Kyiv', 'Tokyo'];<br>

          const findCities = (15 000 000, 20 000 000) => {
            &nbsp;// ..ваш код..
          };
          // отримати міста, населення яких більше ніж 15 млн, але менше ніж 20 млн
          findCities2(15 000 000, 20 000 000); // ['London'];<br>
        </pre>
      </code>
    </p>
    <br />

    <p><b>Рішення:</b></p>
    <br />

    <p>
      Отже, щоб вирішити задачу, ми повинні вивести масив у якому будуть
      елементами імена міст. Для цього в JavaScript є метод масивів
      <b>arr.map()</b>, який викликає функцію для кожного елементу масиву і
      повертає новий масив - результат виконання цієї функції. Нагадаємо його
      синтаксис:<br />
      <em
        >&nbsp;let result = arr.map(function(item, index, array) {<br />
        &nbsp;&nbsp;// повертає нове значення замість елемента<br />
        &nbsp;});</em
      ><br />
      Тобто ми можемо вивести новий масив, значеннями якого є, наприклад, ключі
      об'єктів, в нашому випадку - назви міст, ось так:<br />
    </p>
    <br />

    <p class="code-ex">
      <code>
        <pre>
          const findCities = () => {
            return cities.map(c => c.city);
          };

          findCities(); // ['Kyiv', 'Tokyo', 'New York', 'London']
        </pre>
      </code>
    </p>
    <br />
    <script>
      const cities = [
        { city: 'Kyiv', population: 5_000_000 },
        { city: 'Tokyo', population: 13_000_000 },
        { city: 'New York', population: 22_000_000 },
        { city: 'London', population: 17_000_000 },
      ];

      const findCities = () => {
        return cities.map((c) => c.city);
      };

      console.log(findCities()); // ['Kyiv', 'Tokyo', 'New York', 'London']
    </script>

    <p>
      Але як видно з результатів, ми отримуємо просто назви усіх міст, або по
      суті ми просто 'map'ом проходимся по елементам масиву та повертаємо новий
      масив, елементами якого є ключі об'єкту (назви міст).<br />
      Узагалі, дуже часто використовують метод
      <em>arr.map()</em> для перебору елементів масиву, щоб в парі з якимось
      іншим методом отримати новий масив, що задовольняє певні умови.<br />
      Тому потрібно відфільтрувати міста, які задовольняють умову задачі - щоб
      кількість населення була менше 15млн.<br />
      Отже на вхід функція повинна отримувати числовий параметр - кількість
      населення міста. Далі, розглянемо ішний метод <b>arr.filter()</b> який
      відфільтрує і поверне елементи масиву, які будуть відповідати заданій
      умові. Отже в умові, необхідно задати: кількість населення має бути менше
      15млн, а для цього використаєм оператор <em>меньше ніж -</em>
      <b><</b>.<br />
      Спочатку, нагадаємо синтаксис для методу <em>arr.filter()</em>:<br />
      <em
        >&nbsp;let result = arr.filter(function(item, index, array) {<br />
        &nbsp;&nbsp;// якщо true - елемент додасться до результату, і перебір
        продовжиться<br />
        &nbsp;&nbsp;// поверне пустий масив, якщо нічого не буде знайдено<br />
        &nbsp;});</em
      ><br /><br />
    </p>

    <p>
      Спробуємо використати цей метод, щоб відфільтрувати елементи масиву
      <em>cities</em> - а це об'єкт із полями ключ/значення - назва міста /
      кількість населення за умовою, щоб населення складало 17млн і менше. Щоб
      наглядно подивитись роботу методу <em>arr.filter()</em>, створимо іншу
      функцію <em>findObj</em>, яка буде отримувати ті об'єкти, які відповідають
      заданій умові, ось так:
    </p>
    <br />

    <p class="code-ex">
      <code>
        <pre>
          const findObj = (population) => {
            return cities.filter((c) => c.population < population);
          };

          console.log(findObj(17 000 000)); 
              // [{city: 'Kyiv', population: 5000000} {city: 'Tokyo', population: 13000000}]
        </pre>
      </code>
    </p>
    <br />
    <script>
      const findObj = (population) => {
        return cities.filter((c) => c.population < population);
      };
      console.log(findObj(17000000)); // [{city: 'Kyiv', population: 5000000} {city: 'Tokyo', population: 13000000}]
    </script>

    <p>
      Але, знову ж таки, ми отримали два об'єкти за заданою умовою. Проте
      потрібно отримати не цілий об'єкт, а тільки значення конкретного поля
      об'єкту, в нашому випадку - це назву міста. Таким чином, для вирішення
      задачі спочатку фільтруємо за умовою і отримаємо об'єкти, а веж потім
      виведем конкретне значення кожного того об'єкту. Для цього, икористаєм
      метод
      <em>arr.filter()</em> разом із методом <em>arr.map()</em> для виведення
      назви міст, які мають населення менше 15млн:
    </p>
    <br />

    <p class="code-ex">
      <code>
        <pre>
          const findCities = (population) => {
            return cities.filter(c => c.population < population).map(c => c.city);
          };

          findCities(15000000); // ['Kyiv', 'Tokyo']
        </pre>
      </code>
    </p>
    <br />
    <script>
      const findCities1 = (population) => {
        return cities
          .filter((c) => c.population < population)
          .map((c) => c.city);
      };

      console.log(findCities1(15000000)); // ['Kyiv', 'Tokyo']
    </script>

    <p>
      Ну і тепер, щоб задати умову щоб інша функція виводила назви міст в
      заданому діапазоні задавши мінімальне та максимальне значення діапазону в
      параметрах функції, достатньо тільки задати умову для функції в методі
      <em>arr.filter()</em> з використанням оператора <b>&&</b>, ось так:
    </p>
    <br />

    <p class="code-ex">
      <code>
        <pre>
          const findCities = (popul_min, popul_max) => {
            .filter(c => c.population >= popul_min && c.population <= popul_max).map(c => c.city);
          };

          findCities(15 000 000, 20 000 000); // ['London'];<br>
        </pre>
      </code>
    </p>
    <br />
    <script>
      const findCities2 = (popul_min, popul_max) => {
        return cities
          .filter((c) => c.population >= popul_min && c.population <= popul_max)
          .map((c) => c.city);
      };
      console.log(findCities2(15000000, 20000000)); // ['London'];
    </script>
  </body>
</html>
