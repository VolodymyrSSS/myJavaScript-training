<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Prototype methods, objects without the __proto__ property</title>
    <style>
      body {
        background-color: tan;
        margin: 0;
        font-family: Verdana, sans-serif;
      }

      .emph {
        color: red;
      }

      .title {
        color: navy;
        text-align: center;
        font-weight: 700;
      }

      .task {
        width: 50%;
        padding: 15px 25px;
        color: navy;
        background-color: #e2e2e2;
        margin: 35px auto;
      }

      p {
        width: 80%;
        margin: 0 auto;
      }

      pre {
        width: 50%;
        background-color: #bebebe;
        padding-top: 20px;
        margin: 0 auto;
      }

      code {
        font-family: Arial, Helvetica, sans-serif;
        font-size: large;
      }

      .code-ex {
        width: 50%;
        font-family: sans-serif;
        font-style: italic;
        background-color: #bebebe;
        font-size: large;
        padding-left: 15px;
        margin: 0 auto;
      }

      img {
        display: block;
        margin-left: auto;
        margin-right: auto;
        /* width: 80%; */
      }
    </style>
  </head>

  <body>
    <h2 class="title">
      Working with prototypes: objects without the __proto__ property,<br />
      methods: <span class="emph">Object.create(proto, [descriptors])</span> and
      <span class="emph">Object.getPrototypeOf(obj)</span>
    </h2>

    <h4 class="task">
      В нас є об'єкт <i>animal</i>, який буде вважатись прототипом для
      об'єктів.<br />
      Створіть новий об'єкт <i>rabbit</i>, який може брати властивості і методи
      від прототипу <i>animal</i> без використання властивості __proto__.<br />
      Як ще можна переконатись, що об'єкт <i>animal</i> є прототипом для об'єкта
      <i>rabbit</i>?<br />
      Додайте нові властивості для об'єкта <i>rabbit</i>.<br />
      Створіть клон <i>longEars</i> об'єкта <i>rabbit</i> із властивостями
      першого рівня вкладеності.<br />
    </h4>

    <p>
      <code>
        <pre>
          let animal = {
            eats: true
          };

          console.log(rabbit.eats); // true
          console.log(rabbit.jumps); // true
        </pre>
      </code>
    </p>
    <br />

    <p><b>Відповідь:</b></p>
    <br />

    <p>
      Властивість __proto__ вважається застарілим, і по стандарту воно повинно
      підтримуватися тільки браузерами. Тепер існують більш сучасні методи
      роботи з прототипами. Отже, створимо новий об'єкт <i>rabbit</i> з
      прототипом <i>animal</i> використавши сучасний метод
      <b>Object.create (proto, [descriptors])</b>, який створює порожній об'єкт
      з прихованою властивістю [[Prototype]], і необов'язковими описами/задання
      нових властивостей descriptors, ось так:
    </p>
    <br />

    <p class="code-ex">
      <code>
        <pre>
          let animal = {
            eats: true,
          };
    
          // створюємо новий об'кт с прототипом animal
          let rabbit = Object.create(animal);
    
          // використаємо властивість прототипу
          console.log(rabbit.eats); // true
        </pre>
      </code>
    </p>
    <br />

    <script>
      let animal = {
        eats: true,
      };

      // створюємо новий об'кт с прототипом animal та новими властивостями
      let rabbit = Object.create(animal, {
        jumps: {
          value: true,
        },
        hide: {
          value: true,
        },
      });

      // використаємо властивість прототипу
      console.log(rabbit.eats); // true
    </script>

    <p>
      Тобто, ми переконались, що для новоствореного об'єкта
      <i>rabbit</i> прототипом є об'єкт animal, використавши чи взявши
      властивість eats для новоствореного обєкта <i>rabbit</i> від його
      прототипа animal. Проте, можна переконатись щодо наявного прототипа
      застосувавши також більш сучасний метод для роботи з прототипами
      <b>Object.getPrototypeOf(obj) </b>, який поветрає приховану властивість
      [[Prototype]] об'єкта obj, але тут нас більше цікавить посилання на
      прототип для об'єкта obj, ось так:
    </p>
    <br />

    <p class="code-ex">
      <code>
        <pre>
          // переконались, що прототип объекта rabbit буде об'єкт animal
          console.log(Object.getPrototypeOf(rabbit) === animal); // true 
        </pre>
      </code>
    </p>
    <br />

    <script>
      // ереконались, що прототип объекта rabbit буде об'єкт animal
      console.log(Object.getPrototypeOf(rabbit) === animal); // true
    </script>

    <p>
      Ще при створенні нового об'єкту ми можемо задавати нові властивісті для
      нього, шляхом використання другого необов'язкового параметра опису/задання
      нових властивостей descriptors методу
      <b>Object.create (proto, [descriptors])</b>, ось так:
    </p>
    <br />

    <p class="code-ex">
      <code>
        <pre>
          let rabbit = Object.create(animal, {
            jumps: {
              value: true
            },
            hide: {
              value: true
            }
          });
          // взяли новi властивістi
          console.log(rabbit.jumps); // true
          console.log(rabbit.hide); // true
        </pre>
      </code>
    </p>
    <br />

    <script>
      // взяли новi властивістi
      console.log(rabbit.jumps); // true
      console.log(rabbit.hide); // true
    </script>

    <p>
      Ми також можемо використовувати Object.create для «продвинутого»
      клонування об'єкта, більш потужного, ніж копіювання властивостей в циклі
      for..in.<br />
      <b
        >let clone = Object.create(Object.getPrototypeOf(obj),
        Object.getOwnPropertyDescriptors(obj))</b
      >. Такий виклик створює точну копію об'єкта obj, включаючи всі
      властивості: перераховувані та неперераховувані, геттери/сеттери для
      властивостей, і все це з правильною пріхованою властивістю [[Prototype]].
      Отже, застосуєм цей метод для створення клону об'єкта <i>rabbit</i> з
      назвою <i>longEars</i>ось так:и
    </p>
    <br />

    <p class="code-ex">
      <code>
        <pre>
          // longEars - це клон об'єкта rabbit з тим самим прототипом (с поверхневим копіюванням)
          let longEars = Object.create(
            Object.getPrototypeOf(rabbit),
            Object.getOwnPropertyDescriptors(rabbit)
          );
          // берем склоновану властивість
          console.log(longEars.jumps); // true
        </pre>
      </code>
    </p>
    <br />

    <script>
      // longEars - це клон об'єкта rabbit з тим самим прототипом (с поверхневим копіюванням)
      let longEars = Object.create(
        Object.getPrototypeOf(rabbit),
        Object.getOwnPropertyDescriptors(rabbit)
      );
      // берем склоновану властивість
      console.log(longEars.jumps); // true
    </script>
  </body>
</html>
