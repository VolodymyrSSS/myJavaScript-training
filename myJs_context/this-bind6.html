<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>The essence of context - this and method bind</title>
    <style>
      body {
        background-color: tan;
        margin: 0;
        font-family: Verdana, sans-serif;
      }

      .title {
        color: red;
        text-align: center;
        font-weight: 700;
      }

      .code-ex {
        width: 50%;
        font-family: sans-serif;
        background-color: #bebebe;
        font-size: large;
        padding-left: 15px;
        margin: 0 auto;
      }

      .task {
        width: 50%;
        padding: 15px 25px;
        color: navy;
        background-color: #e2e2e2;
        margin: 35px auto;
      }

      .code-ex {
        width: 50%;
        font-family: sans-serif;
        font-style: italic;
        background-color: #bebebe;
        font-size: large;
        padding-left: 15px;
        margin: 0 auto;
      }

      p {
        width: 80%;
        margin: 0 auto;
      }

      pre {
        font-family: Arial, Helvetica, sans-serif;
        font-size: larger;
        font-weight: 700;
      }
    </style>
  </head>

  <body>
    <h2 class="title">Context - this, method bind</h2>

    <h4 class="task">
      Ми маємо визначений набір параметрів в виді масиву arr де елементи - це об'єкти в кожному з яких властивостями виступають назви країн та імена, які перераховані також в масиві.<br>
      Виведіть усі країни та відповідні для кожної країни імена в консоль створивши для цього функції, які будуть брати необхідні значення з полів масиву arr.<br>
    </h4>

    <p class="code-ex"><br>
      Приклад<br>
      <code><br>
        let arr = [<br>
          {<br>
            country: 'Germany',<br>
            people: ['Martin', 'Nocile', 'Sebastian']<br>
          },<br>
          {<br>
            country: 'Italy',<br>
            people: ['Alessandro', 'Lorenzo', 'Riccardo']<br>
          }<br>
        ];<br>
        <br>
        function getPersonPresentation(country, name){<br>
          return `My name is ${name}. I'm from ${country}`;<br>
        }<br>
        <br>
      </code>
  </p><br>

    <p><b>Відповідь</b>:</p><br>

    <p>Функція, яка завжди викликається з вже визначеним набором параметрів, називається власною (часною) функцією.<br>
      Для вирішення, потрібно спочатку перебрати елементи масиву arr шляхом використання методу для перебору елементів масиву for of і записати в функцію використавши метод bind() для 'жорстої' прив'язки контексту значення поля країни. Ось так:
      </p>

    <p class="code-ex" style="width: 70%">
      <code>
        <pre>
          for (let item of arr) {
            let getPersonPresentationWithCountrySet = getPersonPresentation.bind(null, item.country)
          }
        </pre>
      </code>
    </p>

    <p>Далі, необхідно вже з функцією, яка вже прив'язала країну, перебрати елементи масиву властивості кожного елемента 'people', використавши так само метод для перебору масивів for of та вивести кожне перебираєме значення в консоль, ось так:
    </p>

    <p class="code-ex" style="width: 70%">
      <code>
        <pre>
          for (let item of arr) {
            let getPersonPresentationWithCountrySet = getPersonPresentation.bind(null, item.country)

            for (let person of item.people) {
              console.log(getPersonPresentationWithCountrySet(person));
            }
          }
        </pre>
      </code>
    </p>

    
    <script>
      let arr = [
        {
          country: 'Germany',
          people: ['Martin', 'Nocile', 'Sebastian']
        },
        {
          country: 'Italy',
          people: ['Alessandro', 'Lorenzo', 'Riccardo']
        }
      ];
    
      function getPersonPresentation(country, name){
        return `My name is ${name}. I'm from ${country}`;
      }
      
      for(let item of arr){
        let getPersonPresentationWithCountrySet = getPersonPresentation.bind(null, item.country);
        
        for(let person of item.people)
          console.log(getPersonPresentationWithCountrySet(person));
      }
      
    </script>
  </body>
</html>
